<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
    </head>
    <body>
        <h1>Publish Message</h1>
        <form>
            <label>Message</label>
            <input type="text" id="publishMessage" >
            <button onclick="send()">Send</button>
        </form>
        <script>
            var client = new Paho.MQTT.Client('broker.hivemq.com', Number(8000), 'clientId-y3bwyTQOtu')
            
            client.connect({
                onSuccess: onConnect,
                mqttVersion: 3
            })
            
            function onConnect(){
                console.log('Successfully connected')
            }

            function send(){
                var message = new Paho.MQTT.Message(document.getElementById("publishMessage").value)
                message.destinationName = 'test'
                message.qos = 0;
                client.send(message);

                document.getElementById("publishMessage").value = ""
            }
        </script>

    </body>
</html>